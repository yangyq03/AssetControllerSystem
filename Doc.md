# 资产管理系统接口文档-v1.0

## 1. 用户相关接口

### 1.1 注册

#### 1.1.1 基本信息

> 请求路径：/api/auth/register
>
> 请求方法：POST
>
> 接口描述：该接口用于注册新用户

#### 1.1.2 请求参数

请求参数格式：x-www-form-urlencoded

请求参数说明：

| 参数名称     | 说明   | 类型     | 是否必须 | 备注               |
|----------|------|--------|------|------------------|
| username | 用户名  | string | 是    | 5~16为非空字符        |
| password | 密码   | string | 是    | 5~16为非空字符        |
| role     | 用户角色 | string | 是    | 值只能是admin或common |

请求数据样例：

```shell
username=zhangsan&password=123456&role=admin
```

#### 1.1.3 响应数据

响应数据类型：application/json

响应参数说明：

| 名称      | 类型     | 是否必须 | 默认值 | 备注             | 其他信息 |
|---------|--------|------|-----|----------------|------|
| code    | number | 必须   |     | 响应码, 0-成功,1-失败 |      |
| message | string | 非必须  |     | 提示信息           |      |
| data    | object | 非必须  |     | 返回的数据          |      |

响应数据样例：

```json
{
  "code": 0,
  "message": "操作成功",
  "data": null
}
```

### 1.2 登录

#### 1.2.1 基本信息

> 请求路径：/api/auth/login
>
> 请求方式：POST
>
> 接口描述：该接口用于登录

#### 1.2.2 请求参数

请求参数格式：x-www-form-urlencoded

请求参数说明：

| 参数名称     | 说明  | 类型     | 是否必须 | 备注        |
|----------|-----|--------|------|-----------|
| username | 用户名 | string | 是    | 5~16位非空字符 |
| password | 密码  | string | 是    | 5~16位非空字符 |

请求数据样例：

```shell
username=zhangsan&password=123456
```

#### 1.2.3 响应数据

响应数据类型：application/json

响应参数说明：

| 名称      | 类型     | 是否必须 | 默认值 | 备注             | 其他信息 |
|---------|--------|------|-----|----------------|------|
| code    | number | 必须   |     | 响应码, 0-成功,1-失败 |      |
| message | string | 非必须  |     | 提示信息           |      |
| data    | string | 必须   |     | 返回的数据,jwt令牌    |      |

响应数据样例：

```json
{
  "code": 0,
  "message": "操作成功",
  "data": "eyJhbGci...."
}
```

#### 1.2.4 备注说明

> 用户登录成功后，系统会自动下发JWT令牌，然后在后续的每次请求中，浏览器都需要在请求头header中携带到服务端，请求头的名称为 *
*Authorization**，值为 登录时下发的JWT令牌。
>
> 如果检测到用户未登录，则http响应状态码为401
>

### 1.3 获取用户详细信息

#### 1.3.1 基本信息

> 请求路径：/api/auth/userInfo
>
> 请求方式：GET
>
> 接口描述：该接口用于获取当前已登录用户的详细信息

#### 1.3.2 请求参数

无

#### 1.3.3 响应数据

响应数据类型：application/json

响应参数说明：

| 名称            | 类型     | 是否必须 | 默认值 | 备注             | 其他信息 |
|---------------|--------|------|-----|----------------|------|
| code          | number | 必须   |     | 响应码, 0-成功,1-失败 |      |
| message       | string | 非必须  |     | 提示信息           |      |
| data          | object | 必须   |     | 返回的数据          |      |
| \|-id         | number | 非必须  |     | 主键ID           |      |
| \|-username   | string | 非必须  |     | 用户名            |      |
| \|-email      | string | 非必须  |     | 邮箱             |      |
| \|-role       | string | 非必须  |     | 用户角色           |      |
| \|-createTime | string | 非必须  |     | 创建时间           |      |
| \|-updateTime | string | 非必须  |     | 更新时间           |      |

响应数据样例：

```json
{
  "code": 0,
  "message": "操作成功",
  "data": {
    "id": 5,
    "username": "wangba",
    "email": "",
    "role": "admin",
    "createTime": "2023-09-02 22:21:31",
    "updateTime": "2023-09-02 22:21:31"
  }
}
```

### 1.4 更新用户基本信息

#### 1.4.1 基本信息

> 请求路径：/api/auth/update
>
> 请求方式：PUT
>
> 接口描述：该接口用于更新已登录用户的基本信息(除了用户角色和密码)

#### 1.4.2 请求参数

请求参数格式：application/json

请求参数说明：

| 参数名称     | 说明   | 类型     | 是否必须 | 备注        |
|----------|------|--------|------|-----------|
| id       | 主键ID | number | 是    |           |
| username | 用户名  | string | 否    | 5~16位非空字符 |
| email    | 邮箱   | string | 是    | 满足邮箱的格式   |

请求数据样例：

```json
{
    "id":5,
    "username":"wangba",
    "email":"zhangsan@gmail.com"
}
```

#### 1.4.3 响应数据

响应数据类型：application/json

响应参数说明：

| 名称      | 类型     | 是否必须 | 默认值 | 备注             | 其他信息 |
|---------|--------|------|-----|----------------|------|
| code    | number | 必须   |     | 响应码, 0-成功,1-失败 |      |
| message | string | 非必须  |     | 提示信息           |      |
| data    | object | 非必须  |     | 返回的数据          |      |

响应数据样例：

```json
{
  "code": 0,
  "message": "操作成功",
  "data": null
}
```

### 1.6 更新用户密码

#### 1.6.1 基本信息

> 请求路径：/api/auth/updatePwd
>
> 请求方式：PATCH
>
> 接口描述：该接口用于更新已登录用户的密码

#### 1.6.2 请求参数

请求参数格式：application/json

请求参数说明：

| 参数名称    | 说明    | 类型     | 是否必须 | 备注 |
|---------|-------|--------|------|----|
| old_pwd | 原密码   | string | 是    |    |
| new_pwd | 新密码   | string | 是    |    |
| re_pwd  | 确认新密码 | string | 是    |    |

请求数据样例：

```json
{
  "old_pwd": "123456",
  "new_pwd": "234567",
  "re_pwd": "234567"
}
```

#### 1.6.3 响应数据

响应数据类型：application/json

响应参数说明：

| 名称      | 类型     | 是否必须 | 默认值 | 备注             | 其他信息 |
|---------|--------|------|-----|----------------|------|
| code    | number | 必须   |     | 响应码, 0-成功,1-失败 |      |
| message | string | 非必须  |     | 提示信息           |      |
| data    | object | 非必须  |     | 返回的数据          |      |

响应数据样例：

```json
{
  "code": 0,
  "message": "操作成功",
  "data": null
}
```

### 1.7 修改其他用户的角色

#### 1.7.1 基本信息

> 请求路径：/api/auth/updateRole
>
> 请求方式：PATCH
>
> 接口描述：该接口用于管理员修改其他用户的用户角色，**该接口仅管理员(admin)可调用**

#### 1.7.2 请求参数

请求参数格式：application/json

请求参数说明：

| 参数名称     | 说明   | 类型     | 是否必须 | 备注 |
|----------|------|--------|------|----|
| username | 用户名  | string | 是    |    |
| role     | 用户角色 | string | 是    |    |

请求数据样例：

```json
{
  "username": "zhangsan",
  "role": "admin"
}
```

#### 1.7.3 响应数据

响应数据类型：application/json

响应参数说明：

| 名称      | 类型     | 是否必须 | 默认值 | 备注             | 其他信息 |
|---------|--------|------|-----|----------------|------|
| code    | number | 必须   |     | 响应码, 0-成功,1-失败 |      |
| message | string | 非必须  |     | 提示信息           |      |
| data    | object | 非必须  |     | 返回的数据          |      |

响应数据样例：

```json
{
  "code": 0,
  "message": "操作成功",
  "data": null
}
```

#### 1.7.4 备注说明

> 不能修改当前登录用户的角色

### 1.8 获取所有用户的信息

#### 1.8.1 基本信息

> 请求路径：/api/auth/allUsers
>
> 请求方式：GET
>
> 接口描述：获取所有已经注册的用户信息（**包含当前登录的用户**）

#### 1.8.2 请求参数

无

#### 1.8.3 响应数据

响应数据类型：application/json

响应参数说明：

| 名称            | 类型     | 是否必须 | 默认值 | 备注             | 其他信息 |
|---------------|--------|------|-----|----------------|------|
| code          | number | 必须   |     | 响应码, 0-成功,1-失败 |      |
| message       | string | 非必须  |     | 提示信息           |      |
| data          | object | 必须   |     | 返回的数据          |      |
| \|-id         | number | 非必须  |     | 主键ID           |      |
| \|-username   | string | 非必须  |     | 用户名            |      |
| \|-email      | string | 非必须  |     | 邮箱             |      |
| \|-role       | string | 非必须  |     | 用户角色           |      |
| \|-createTime | string | 非必须  |     | 创建时间           |      |
| \|-updateTime | string | 非必须  |     | 更新时间           |      |

响应数据样例：

```json
{
  "code": 0,
  "message": "操作成功",
  "data": [
    {
      "id": 1,
      "username": "zhangsan",
      "email": "",
      "role": "admin",
      "createTime": "2024-04-27 17:05:46",
      "updateTime": "2024-04-27 17:05:53"
    },
    {
      "id": 2,
      "username": "wangwu",
      "email": "",
      "role": "common",
      "createTime": "2024-04-27 17:06:22",
      "updateTime": "2024-04-27 17:06:28"
    }
  ]
}
```
